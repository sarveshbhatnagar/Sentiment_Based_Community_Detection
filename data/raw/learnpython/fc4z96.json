{"id": "fc4z96", "title": "Getting Weather info with bs4", "url": "https://www.reddit.com/r/learnpython/comments/fc4z96/getting_weather_info_with_bs4/", "subreddit": "learnpython", "author": "t2_4b4ooidc", "text": "So I want to search the NWS for the weathers in counties in a certain state. I found the exact place where the information is and do not know how to access it.\n\nHere is what is in the website\n\n    <h3 id=\"getfcst-headOffice\">\n        <a href=\"https://www.weather.gov/ict\">Wichita KS</a>\n    </h3>\n\n&#x200B;\n\nHere is what I have so far, but I doesn't print what is below it. I am using bs4.\n\n    e = soup.body.find(id='getfcst-headOffice')\n\nAny ideas?", "comments": [{"id": "fj8qz6n", "author": "Vaphell", "body": "looking at the network traffic using the browser's builtin dev tools reveals that you can trivially get raw data in the json form, which is infinitely more preferable than web scraping.\n\nWichita, KS  \nhttps://forecast.weather.gov/MapClick.php?lat=37.6872&lon=-97.3301&FcstType=json\n\nChicago, IL  \nhttps://forecast.weather.gov/MapClick.php?lat=41.837&lon=-87.685&FcstType=json\n\n    import requests\n\n    url = 'https://forecast.weather.gov/MapClick.php?lat=41.837&lon=-87.685&FcstType=json'\n    data = requests.get(url).json()\n    print(data['currentobservation'])\n\nresult\n\n    {'id': 'KMDW', 'name': 'Chicago, Chicago Midway Airport', 'elev': '617', 'latitude': '41.78', 'longitude': '-87.76', 'Date': '1 Mar 20:53 pm CST', 'Temp': '52', 'Dewp': '44', 'Relh': '75', 'Winds': '8', 'Windd': '210', 'Gust': '0', 'Weather': 'Overcast', 'Weatherimage': 'novc.png', 'Visibility': '10.00', 'Altimeter': '1007.0', 'SLP': '29.73', 'timezone': 'CST', 'state': 'IL', 'WindChill': 'NA'}"}, {"id": "fj8nzof", "author": "xtthew", "body": "All that you're retrieving is a link to another page.\n\nIf you go to that page [`https://www.weather.gov/ict`](https://www.weather.gov/ict) you can the information from there.\n\nFor example, info you can get from that page:\n\n    <p id=\"myfcst-location\">Fair</p>\n    <span id=\"myfcst-tempf\">56\u00b0F</span>\n    \n    <div class=\"myfcst-later\">\n        <p class=\"myfcst-location\">Tonight</p>\n        <p class=\"myfcst-forecast\">Mostly Clear</p>\n        <span id=\"myfcst-low\">Low: 36\u00b0F</span>\n    </div>"}, {"id": "fj91fw9", "author": "Han-Solo_Burger", "body": "[DarkSky](https://darksky.net/dev/docs/libraries) offers an API that  allows you to make up to 1000 requests for free for both forecasts and historical weather data, only thing you gotta do is create an account !\n\nEdit : You can make requests on lat/long, so you might want to use [GeoPy](https://geopy.readthedocs.io/en/stable/) to translate city names into lat/long coordinates."}]}