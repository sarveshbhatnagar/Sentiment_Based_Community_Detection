{"id": "fc07h3", "title": "How to properly use POST in an API request for Earth Explorer", "url": "https://www.reddit.com/r/learnpython/comments/fc07h3/how_to_properly_use_post_in_an_api_request_for/", "subreddit": "learnpython", "author": "t2_digyd", "text": "So first of all thanks, i'm really new to python and i am trying to understand APIs, i'm currently trying to log in into /inventory/json/v/1.4.1/?jsonRequest= which is the Earth Explorer API, and the first step is to Login, and according to the documentation i am supposed to use POST instead of GET, so here is what i got so far, and it works but this is what i\n\n    \n    import requests\n    \n    import requests\n    user = 'xxxxx'\n    psword = 'xxxxx'\n    \n    input_data= {'username':user,'password':psword,'catalogId':'EE'}\n    test=requests.post('https://earthexplorer.usgs.gov/inventory/json/v/1.4.0/login?jsonRequest=input_data)')\n    \n    print(test.text)\n    print(test.status_code)\n    \n    {\"errorCode\":\"AUTH_ERROR\",\"error\":\"Passing credentials via URL is not permitted - use a POST request\",\"data\":null,\"api_version\":\"\",\"access_level\":\"guest\",\"executionTime\":0} 200\n    \n    \n    \n    I have no idea what to do, thank you so much. This is the documentation for the earth explorer API, thank you so much https://earthexplorer.usgs.gov/inventory/documentation/json-api?version=1.4.1#login", "comments": [{"id": "fj7tbv3", "author": "efmccurdy", "body": "You are attempting to put your data into the url string (jsonRequest=input\\_data') but a POST request includes data in the body of the request. You pass that data to the post function with the data= argument:\n\n    requests.post('https://...', data=input_data)"}, {"id": "fj8csib", "author": "Brent_Gaskel", "body": "So after messing around for the last 45 minutes trying to figure it out,  I finally did. If I'm honest though, their documentation is crap lol.\n\nLooks like you have to encode the 'jsonRequest' value to JSON. That's the only way their server will read it.\n\n\n    import requests\n    import json\n\n    params = {\n        \"username\": \"xxxxxxxx\",\n        \"password\": \"xxxxxxxx\",\n        \"authType\": \"EROS\",\n        \"catalogId\": \"EE\"\n    }\n    \n    data = {\n        'jsonRequest': json.dumps(params)\n    }\n    url = 'https://earthexplorer.usgs.gov/inventory/json/v/1.4.0/login'\n\n    r = requests.post(url, data=data)\n\n    print(r.json())\n\n    apikey = r.json()['data']\n    print(apikey)\n\n\nhttps://repl.it/repls/ExtraneousRuddyVideogames\n\nHopefully this helps."}]}